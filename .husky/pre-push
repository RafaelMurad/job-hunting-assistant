#!/usr/bin/env bash
# Pre-push hook - runs before git push
# Ensures we don't push broken code to main

set -e

echo "ğŸš€ Pre-Push Validation..."

# Only validate if pushing to main
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

if [ "$CURRENT_BRANCH" = "main" ]; then
  echo "ğŸ“ Pushing to main - running full validation..."
  
  # Run all validation checks
  npm run validate
  
  # Ensure build works
  echo "ğŸ—ï¸  Testing production build..."
  npm run build
  
  echo "âœ… Pre-push validation passed!"
else
  echo "ğŸ“ Pushing to branch: $CURRENT_BRANCH"
  echo "âœ… Skipping full validation (only main requires it)"
fi
